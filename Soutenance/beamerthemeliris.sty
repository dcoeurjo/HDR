% **************************************************************************
% Beamer template for the LIRIS laboratory
%
% Written by Christian Wolf
% christian.wolf@liris.cnrs.fr
%
% **************************************************************************
% Changelog:
% 1.00 29.11.2006 cw: -First version
% **************************************************************************

%\DeclareOptionBeamer{compress}{\beamer@compresstrue}
\ProcessOptionsBeamer

\mode<presentation>

% **************************************************************************
% The colors
% **************************************************************************

\definecolor{darkred}{rgb}{1,0,0}
\definecolor{darkgreen}{RGB}{0,100,0}

\definecolor{lirisdarkblue1}{RGB}{23,74,124}
\definecolor{lirisdarkblue2}{RGB}{0,73,89}
\definecolor{lirisdarkblue3}{RGB}{0,60,75}
\definecolor{lirislightblue1}{RGB}{197,198,213}
\definecolor{lirislightblue2}{RGB}{156,161,189}
\definecolor{lirislightblue3}{RGB}{30,76,124}
\definecolor{liristextcolor}{RGB}{0,73,89}
\definecolor{lirisstructure}{RGB}{121,20,32}
\definecolor{lirisalert}{RGB}{180,9,29}
\definecolor{lirisalertbg}{RGB}{255,76,57}
\definecolor{lirisblockbg}{RGB}{231,231,255}
\definecolor{lirisblockalertbg}{RGB}{255,231,231}
\definecolor{lirisblockexbg}{RGB}{201,231,201}


\setbeamercolor{section in toc}{fg=liristextcolor}
\setbeamercolor{alerted text}{fg=lirisalert}
\setbeamercolor{structure}{fg=lirisstructure}
\setbeamercolor{normal text}{fg=liristextcolor}
\setbeamercolor*{palette primary}{fg=white,bg=lirisdarkblue1}
\setbeamercolor*{palette secondary}{fg=white,bg=lirisdarkblue2}	
\setbeamercolor*{palette tertiary}{fg=white,bg=lirisdarkblue3} 
\setbeamercolor*{palette quaternary}{fg=lirisdarkblue1,bg=lirislightblue2}

\setbeamercolor{item}{fg=lirisdarkblue1,bg=lirisdarkblue2}
\setbeamercolor{description item}{fg=lirisstructure}

\setbeamercolor{titlelike}{parent=palette primary,fg=white,bg=lirislightblue2}
\setbeamercolor{frametitle}{fg=lirislightblue1,bg=lirisdarkblue2}

\setbeamertemplate{items}[circle]
\setbeamertemplate{sections/subsections in toc}[circle]

\setbeamercolor{header}{parent=palette tertiary}
\setbeamercolor{footer}{parent=normal text}
\setbeamercolor{footer sep}{fg=liristextcolor,bg=liristextcolor,parent=author in head/foot}
\setbeamercolor{titlefooter}{fg=lirislightblue1,bg=liristextcolor}

% **************************************************************************
% This section contains the definitions which are normally declared by 
% the outer theme, but which we do manually.
% **************************************************************************

\newif\ifbeamer@theme@subsection
\beamer@theme@subsectiontrue

\DeclareOptionBeamer{footline}{\csname beamer@theme@footline@#1\endcsname}
\DeclareOptionBeamer{subsection}[true]{\csname beamer@theme@subsection#1\endcsname}

\ProcessOptionsBeamer
\mode<presentation>

% **************************************************************************
% The header
% **************************************************************************

\defbeamertemplate*{headline}{liris theme}
{%
  \begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
  \end{beamercolorbox}
  \begin{beamercolorbox}{header}    
   \vskip2pt\insertsectionnavigationhorizontal{\paperwidth}{}{}\vskip2pt       
  \end{beamercolorbox}%  
}

% **************************************************************************
% The footer
% **************************************************************************

\setbeamertemplate{footline}
{
  	\leavevmode
	\hbox{  		
  		\hspace{0.9\paperwidth}
  		\includegraphics[width=0.08\paperwidth]{beamerthemelirislogosmall.png} 	
  		\hspace{-1\paperwidth}
  		\begin{beamercolorbox}[wd=\paperwidth,ht=0.2ex,dp=0.1ex,leftskip=.3cm plus1fill,rightskip=.3cm]{footer sep}
  		\end{beamercolorbox} 
  	}
  	\hbox{
		\hspace{-0.51em}
		\begin{beamercolorbox}[wd=.5\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm plus1fill,rightskip=.3cm]{footer}
    		\usebeamerfont{footer}\insertshortauthor
  		\end{beamercolorbox} 
		\hspace{-0.51em}
  		\begin{beamercolorbox}[wd=.4\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm,rightskip=.3cm plus1fil]{footer}
    		\usebeamerfont{footer}\insertshorttitle
  		\end{beamercolorbox}
		\hspace{-0.51em}
		\begin{beamercolorbox}[wd=.2\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm,rightskip=.3cm plus1fil]{footer}
    		\usebeamerfont{footer}\insertframenumber{} / \inserttotalframenumber
  		\end{beamercolorbox}
	}
  	\vskip0pt
}

% **************************************************************************
% end declarations for the outer theme
% **************************************************************************


% **************************************************************************
% Various settings
% **************************************************************************

\useinnertheme[shadow=true]{rounded}
\setbeamercovered{transparent}
\usefonttheme[onlymath]{serif}
\setbeamertemplate{navigation symbols}{}
\setbeamersize{text margin left=0.7cm}

\setbeamercolor*{block title}{bg=lirisblockbg}
\setbeamercolor*{block body}{bg=lirisblockbg}
\setbeamercolor*{block title alerted}{fg=lirisalert,bg=lirisblockalertbg}
\setbeamercolor*{block body alerted}{bg=lirisblockalertbg}
\setbeamercolor*{block title example}{fg=darkgreen,bg=lirisblockexbg}
\setbeamercolor*{block body example}{bg=lirisblockexbg}

\setbeamerfont*{block title}{size=\normalsize}
\setbeamerfont*{block title example}{size=\normalsize}
\setbeamerfont*{block title alerted}{size=\normalsize}


% **************************************************************************
% Change the bullets
% **************************************************************************

\useitemizeitemtemplate{%
    \tiny\raise0.5pt\hbox{\color{beamerstructure}\includegraphics[height=1.8ex]{beamerthemelirisitemizeitem.png}}%
}
\usesubitemizeitemtemplate{%
    \tiny\raise0.5pt\hbox{\color{red}{\large$\bullet$}}%
}
\usesubsubitemizeitemtemplate{%
    \tiny\raise0.5pt\hbox{\color{liristextcolor}{\large$\bullet$}}%
}

% **************************************************************************
% The title page
% **************************************************************************

\setbeamertemplate{title page}
{
  % -----------------------------------------------
  % ---- If the user chose a plain frame, we will create
  % ---- the full LIRIS title 
  
  \ifbeamer@plainframe
  	\hbox{
  		\includegraphics[width=0.3\paperwidth]{beamerthemelirislogo.png}
  		\hspace{0.4\paperwidth}
  		\vspace{-2ex}
  		\includegraphics[width=0.13\paperwidth]{beamerthemelirislogocnrs.png}
		\hspace{-0.6\paperwidth}
		\vspace{-4ex}
		\begin{beamercolorbox}[wd=0.6\paperwidth,ht=0.1ex,dp=0.1ex,leftskip=.3cm plus1fill,rightskip=.3cm]{titlefooter}    		
  		\end{beamercolorbox} 
  		\vspace{1cm}
	}
	
	\vbox{}
	\vfill\vspace{1cm}
	\begin{centering}
		\begin{beamerboxesrounded}[upper=titlelike,lower=titlelike,sep=8pt,center]{}
		\begin{centering}
		\usebeamerfont{title}\inserttitle\par%
		\ifx\insertsubtitle\@empty%
		\else%
			\vskip0.25em%
			{\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
		\fi%     
		\end{centering}
		\end{beamerboxesrounded}%
		%\begin{beamercolorbox}[sep=8pt,center]{title}
		%\usebeamerfont{title}\inserttitle\par%
		%\ifx\insertsubtitle\@empty%
		%\else%
		%	\vskip0.25em%
	    %   {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
		%\fi%     
		%\end{beamercolorbox}%
		\vskip1em\par
		\begin{beamercolorbox}[sep=8pt,center]{author}
		\usebeamerfont{author}\insertauthor
		\end{beamercolorbox}
		\begin{beamercolorbox}[sep=8pt,center]{institute}
		\usebeamerfont{institute}\insertinstitute
		\end{beamercolorbox}	
		{\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}		
	\end{centering}
	
	% ---- Create the bar at the bottom
	\vskip0pt plus 1filll	
	
	\hbox{
		\hspace{-0.51em}
		\begin{beamercolorbox}[wd=\paperwidth,ht=2ex,dp=0.1ex,leftskip=.3cm plus1fill,rightskip=.3cm]{titlefooter}    		
  		\end{beamercolorbox} 		
	}
	\vspace{-4ex}
	\hbox{
		\hspace{0.5\paperwidth}
		\begin{beamerboxesrounded}[width=0.4\paperwidth,upper=titlefooter,lower=titlefooter]{}
		\begin{center}
		\insertdate 
		\end{center}
		\end{beamerboxesrounded}
	}
	
	\vfill	
  
  % -----------------------------------------------  
  % ---- If the user chose a normal frame we 
  % ---- render just the normal title
  
  \else    
	\vbox{}
	\vfill
	\begin{centering}
		\begin{beamercolorbox}[sep=8pt,center]{title}
		\usebeamerfont{title}\inserttitle\par%
		\ifx\insertsubtitle\@empty%
		\else%
			\vskip0.25em%
			{\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
		\fi%     
		\end{beamercolorbox}%
		\vskip1em\par
		\begin{beamercolorbox}[sep=8pt,center]{author}
		\usebeamerfont{author}\insertauthor
		\end{beamercolorbox}
		\begin{beamercolorbox}[sep=8pt,center]{institute}
		\usebeamerfont{institute}\insertinstitute
		\end{beamercolorbox}
		\begin{beamercolorbox}[sep=8pt,center]{date}
		\usebeamerfont{date}\insertdate
		\end{beamercolorbox}\vskip0.5em
		{\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
	\end{centering}
	\vfill
  \fi
}

\mode
<all>
